{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta tags -->
    {% block meta %}
        <!-- Technical meta tags -->
        <!-- https://ahrefs.com/blog/open-graph-meta-tags/ -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <!-- SEO meta tags -->
        <meta name="description" content="BookLand - Your curated online bookstore for philosophy, psychology, and self-development books. Free shipping over $40, thoughtful recommendations, and a community of book lovers. Find your next great read today!">
        <meta name="keywords" content="buy books online, psychology books, philosophy books, self-development books, where to buy books online not amazon, online bookstore, book recommendations, book gift ideas, biography books, new book releases, book delivery, curated book collection, free shipping books">
        <meta name="author" content="BookLand">
        
        <!-- Open Graph Tags (Facebook, LinkedIn) -->
        <!-- Source: https://ogp.me/ -->
        <meta property="og:type" content="website">
        <meta property="og:url" content="{{ request.build_absolute_uri }}">
        <meta property="og:title" content="{% block og_title %}BookLand | Your Curated Online Bookstore{% endblock %}">
        <meta property="og:description" content="{% block og_description %}Discover curated books in philosophy, psychology & self-development with free shipping over $40{% endblock %}">
        <meta property="og:image" content="{% block og_image %}https://res.cloudinary.com/daxe6o2am/image/upload/v1740568028/bookland-og-image.jpg{% endblock %}">
        <meta property="og:site_name" content="BookLand">
        <meta property="og:locale:alternate" content="en_US">
        <meta property="fb:app_id" content="">
        <meta property="article:publisher" content="https://www.facebook.com/profile.php?id=61575641435990">
        
        <!-- Twitter Card tags -->
        <!-- Source: https://developer.x.com/en/docs/x-for-websites/cards/overview/markup -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="{% block twitter_title %}BookLand | Curated Online Bookstore{% endblock %}">
        <meta name="twitter:description" content="{% block twitter_description %}Discover curated books in philosophy, psychology & self-development with free shipping over $40{% endblock %}">
        <meta name="twitter:image" content="{% block twitter_image %}https://res.cloudinary.com/daxe6o2am/image/upload/v1740568028/bookland-og-image.jpg{% endblock %}">
        <meta name="twitter:site" content="@BookLand">
        
        <!-- WhatsApp specific meta tags -->
        <meta property="og:image:width" content="1200">
        <meta property="og:image:height" content="630">
        
        <!-- Additional SEO Meta Tags -->
        <meta name="robots" content="index, follow">
        <meta name="language" content="English">
        <meta name="revisit-after" content="7 days">
        <meta name="theme-color" content="#ff7b00">

        <!-- Favicon -->
        <link rel="icon" href="https://res.cloudinary.com/daxe6o2am/image/upload/v1740568028/favicon-32x32_zcf51t.png" type="image/png">
        <link rel="apple-touch-icon" href="https://res.cloudinary.com/daxe6o2am/image/upload/v1740568028/apple-touch-icon.png">
        
        <!-- Canonical URL to prevent duplicate content issues -->
        <link rel="canonical" href="{{ request.build_absolute_uri }}" />
{% endblock %}

    <!-- Page title with fallback to site name -->
    <title>{% block head_title %}BookLand | Your Curated Online Bookstore for Philosophy, Psychology & More{% endblock %}</title>
    
    <!-- Core CSS - Bootstrap, icons, and base styles 
         Source: https://getbootstrap.com/docs/5.3/getting-started/introduction/ -->
    {% block corecss %}
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"></noscript>
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"></noscript>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    {% endblock %}

    {% block extra_css %}
    {% endblock %}
    
</head>

<body>
    <!-- Navigation bar 
         Django template includes documentation: https://docs.djangoproject.com/en/5.1/ref/templates/builtins/#include -->
    {% include 'includes/main_nav.html' %}

    <!-- Main content container - flexible for all page templates -->
    <main class="container py-4">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Newsletter Section - appears on all pages -->
    <div class="container">
        <!-- Responsive grid layout with centered content -->
        <!-- Source: https://getbootstrap.com/docs/5.3/layout/grid/ -->
        <div class="row justify-content-center mt-5 pt-3 border-top">
            <div class="col-12 text-center mb-3">
                <h4>Join Our Newsletter</h4>
            </div>
            <div class="col-12 col-md-8 col-lg-6">
                <!-- Simple newsletter signup form
                     Bootstrap form documentation: https://getbootstrap.com/docs/5.3/forms/overview/ -->
                     <form id="newsletter-form" class="d-flex justify-content-center">
                        {% csrf_token %}
                        <div class="w-100">
                            <!-- Input group for styling the form elements together -->
                            <!-- Source: https://getbootstrap.com/docs/5.3/forms/input-group/ -->
                            <div class="input-group">
                                <input type="email" id="newsletter-email" class="form-control" placeholder="Enter your email" required>
                                <button type="submit" id="newsletter-submit" class="btn btn-dark" aria-label="Subscribe to newsletter">Subscribe</button>
                            </div>
                            <!-- Container for displaying success/error messages -->
                            <div id="newsletter-message" class="mt-2 text-center"></div>
                        </div>
                    </form>
            </div>
        </div>
    </div>

    <!-- Core JavaScript libraries - Bootstrap, Popper, jQuery
         Source: https://getbootstrap.com/docs/5.3/getting-started/introduction/ -->
         {% block corejs %}
         <script src="{% static 'newsletter/js/newsletter.js' %}" defer></script>
         <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer
             integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
             crossorigin="anonymous"></script>
         <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" defer
             integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
             crossorigin="anonymous"></script>
         <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js" defer
             integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
         <script src="{% static 'js/toasts/toast_handler.js' %}" defer></script>
     {% endblock %}

    <!-- Page-specific additional JavaScript
         Django template blocks documentation: https://docs.djangoproject.com/en/5.1/ref/templates/language/#template-inheritance -->
    {% block extra_js %}
    <script>
        // Wait for document to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Update quantity on click - used in cart page
            const updateButtons = document.querySelectorAll('.update-link');
            updateButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    this.closest('.update-form').submit();
                });
            });
        });
    </script>
    {% endblock %}

    <!-- Footer section - consistent across all pages -->
    <footer class="bg-white border-top py-4 mt-4" itemscope itemtype="https://schema.org/WPFooter">
        <div class="container">
            <div class="row">
                <!-- Brand and Description -->
                 <div class="col-md-4">
                    <h5>Bookland</h5>
                    <hr>
                    <p itemprop="description">
                        BookLand is more than just an online bookstore. We're a community of book lovers dedicated to connecting readers with their next great adventure.
                    </p>
                 </div>

                 <!-- Customer Service Links - connects to extra_pages app views
                      Django URL tag documentation: https://docs.djangoproject.com/en/5.1/ref/templates/builtins/#url -->
                 <div class="col-md-4">
                    <h5>Customer Service</h5>
                    <hr>
                    <ul>
                        <li class="mb-2"><a href="{% url 'faq' %}" class="text-decoration-none text-dark">FAQ<a></li>
                        <li class="mb-2"><a href="{% url 'shipping_policy' %}" class="text-decoration-none text-dark">Shipping Policy</a></li>
                        <li class="mb-2"><a href="{% url 'returns' %}" class="text-decoration-none text-dark">Returns</a></li>
                        <li class="mb-2"><a href="{% url 'privacy_policy' %}" class="text-decoration-none text-dark">Privacy Policy</a></li>
                        <li class="mb-2"><a href="{% url 'about_us' %}" class="text-decoration-none text-dark">About Us</a></li>
                        <li class="mb-2"><a href="{% url 'public_testimonials' %}" class="text-decoration-none text-dark">Testimonials</a></li>
                    </ul>
                 </div>

                 <!-- Connect With Us - contact information and social media -->
                 <div class="col-md-4">
                    <h5 class="fw-bold mb-3">Connect With Us</h5>
                    <hr>
                    <p class="mb-2"><i class="bi bi-envelope-fill me-2"></i>booklandst@gmail.com</p>
                    <p class="mb-3"><i class="bi bi-telephone-fill me-2"></i>+123 456-789</p>
                    
                    <!-- Social Media Icons - using Bootstrap Icons
                         Source: https://icons.getbootstrap.com/ -->
                    <div class="d-flex">
                        <a href="https://www.facebook.com/profile.php?id=61575641435990" class="text-dark me-3 fs-5" target="_blank" aria-label="Visit our Facebook page"><i class="bi bi-facebook" rel="noopener"></i></a>
                    </div>
                </div>
            </div>

            <!-- Copyright -->
            <div class="row mt-4">
                <div class="col text-center">
                    <hr>
                    <p class="small"><span itemprop="copyrightYear">@ 2025</span> <span itemprop="copyrightHolder">BookLand</span>. All rights reserved.</p>
                </div>
            </div> 
        </div>
     </footer>
     
<!-- Toast message container - for displaying alerts/notifications
     Source: https://getbootstrap.com/docs/5.3/components/toasts/ and
     Django messages framework: https://docs.djangoproject.com/en/5.1/ref/contrib/messages/ -->
{% include 'includes/toasts/toast_container.html' %}
  
</body>

</html>